{% extends "base.html" %}
{% block content %}

<div class="card center-box">
    <h2>Contact Us</h2>
    <p class="small">Have a question? Send us a message and we'll get back to you soon.</p>

    <form id="contactForm">
        
        <label>Your Name</label>
        <input id="name" type="text" name="name" required>

        <label>Your Email</label>
        <input id="email" type="email" name="email" required>

        <label>Message</label>
        <textarea id="message" name="message" rows="6" required></textarea>

        <div style="display:flex; gap:8px; margin-top:10px;">
            <button class="btn" type="submit">Send Message</button>
            <button type="button" class="btn" onclick="document.getElementById('contactForm').reset();">
                Clear
            </button>
        </div>

        <p id="contactStatus" class="small" style="margin-top:8px;"></p>
    </form>
</div>

<!-- EmailJS CDN -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
(function() {
    // Public key from EmailJS
    emailjs.init("HVWCSnTNghNSHfelt");
})();

document.getElementById("contactForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const statusEl = document.getElementById("contactStatus");
    statusEl.textContent = "Sending...";

    const templateParams = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        message: document.getElementById("message").value,
        title: "New Contact Request"
    };

    emailjs.send("service_g0rw3tm", "template_yyny5ck", templateParams)
        .then(function() {
            statusEl.textContent = "Message sent successfully!";
            document.getElementById("contactForm").reset();
        }, function(error) {
            console.error(error);
            statusEl.textContent = "Failed to send message. Please try again.";
        });
});
</script>

{% endblock %}
