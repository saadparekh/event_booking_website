{% extends "base.html" %} {% block content %}


<div
  class="card"
  style="padding: 30px; margin-bottom: 35px; text-align: center"
>
  <h1 style="margin-bottom: 10px"> Welcome to Event Booking System</h1>

  <p style="font-size: 18px; font-weight: 600; color: #2491c4">
    A complete platform to explore upcoming events, browse categories, and
    manage seat bookings quickly and efficiently.<br><br>  
    Developed by Syeda Maheen Zaidi and Saad Sohail
  </p>
</div>

<h2 id="upcoming">Upcoming Events</h2>

<div
  class="event-list"
  style="margin-bottom: 30px; display: flex; flex-wrap: wrap; gap: 12px"
>
  {% for e in upcoming %}
  <div class="event-card card" style="width: 220px; padding: 10px">
    {% set img_path = e.image if e.image|length > 3 else url_for('static',
    filename='uploads/' + (e.category|lower) + '.png') %}
    <img
      src="{{ img_path }}"
      style="width: 100%; height: 140px; object-fit: cover"
      alt="{{ e.title }}"
    />

    <h3 style="font-size: 16px; margin: 8px 0">{{ e.title }}</h3>

    <div class="meta" style="font-size: 14px">
      <div>{{ e.category }} • {{ e.date }}</div>
      <div>Rs {{ e.price }}</div>
    </div>

    <p class="small">{{ e.location }}</p>

    <div style="margin-top: 8px; display: flex; gap: 6px; flex-wrap: wrap">
      {% if is_admin %}
      <a
        href="/update-event/{{ e._id }}"
        class="btn"
        style="background: #444; font-size: 13px; padding: 4px 6px"
      >
        Edit
      </a>
      <a
        href="/delete-event/{{ e._id }}"
        class="btn-del"
        style="font-size: 13px; padding: 4px 6px"
        onclick="return confirm('Delete this event?')"
      >
        Delete
      </a>
      {% else %}
      <a
        href="/book/{{ e._id }}"
        class="btn"
        style="font-size: 13px; padding: 4px 6px"
      >
        Book Now
      </a>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>

<hr style="margin: 30px 0" />


<h2>Browse by Categories</h2>

{% for category, list_events in categories.items() %}
<h3 style="margin-top: 25px">{{ category }}</h3>

<div
  class="event-list"
  style="margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 12px"
>
  {% for e in list_events %}
  <div class="event-card card" style="width: 220px; padding: 10px">
    {% set img_path = e.image if e.image|length > 3 else url_for('static',
    filename='uploads/' + (e.category|lower) + '.png') %}
    <img
      src="{{ img_path }}"
      style="width: 100%; height: 140px; object-fit: cover"
      alt="{{ e.title }}"
    />

    <h3 style="font-size: 16px; margin: 8px 0">{{ e.title }}</h3>

    <div class="meta" style="font-size: 14px">
      <div>{{ e.category }} • {{ e.date }}</div>
      <div>Rs {{ e.price }}</div>
    </div>

    <p class="small">{{ e.location }}</p>

    <div style="margin-top: 8px; display: flex; gap: 6px; flex-wrap: wrap">
      {% if is_admin %}
      <a
        href="/update-event/{{ e._id }}"
        class="btn"
        style="background: #444; font-size: 13px; padding: 4px 6px"
      >
        Edit
      </a>
      <a
        href="/delete-event/{{ e._id }}"
        class="btn-del"
        style="font-size: 13px; padding: 4px 6px"
        onclick="return confirm('Delete this event?')"
      >
        Delete
      </a>
      {% else %}
      <a
        href="/book/{{ e._id }}"
        class="btn"
        style="font-size: 13px; padding: 4px 6px"
      >
        Book Now
      </a>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>
{% endfor %} {% endblock %}
